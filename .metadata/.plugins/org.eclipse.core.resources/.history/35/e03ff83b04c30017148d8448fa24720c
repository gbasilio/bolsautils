package br.gustavo.general;

import java.io.InputStream;
import java.net.URL;
import java.util.Random;

public class DownloadInformacoesInfomoney {

	// Ibrx50
//	private static String[] cods = {"BISA3",
//		"GOLL4",
//		"RSID3",
//		"ELPL4",
//		"MMXM3",
//		"GFSA3",
//		"SUZB5",
//		"MRFG3",
//		"PDGR3",
//		"MRVE3",
//		"ALLL3",
//		"BRKM5",
//		"DASA3",
//		"CSAN3",
//		"FIBR3",
//		"RENT3",
//		"CYRE3",
//		"CTIP3",
//		"OIBR4",
//		"OGXP3",
//		"HYPE3",
//		"USIM5",
//		"HGTX3",
//		"TIMP3",
//		"GOAU4",
//		"BRAP4",
//		"LAME4",
//		"CSNA3",
//		"JBSS3",
//		"NATU3",
//		"LREN3",
//		"CRUZ3",
//		"CMIG4",
//		"BRML3",
//		"VIVT4",
//		"SANB11",
//		"CIEL3",
//		"CCRO3",
//		"GGBR4",
//		"BBAS3",
//		"BRFS3",
//		"ITSA4",
//		"BVMF3",
//		"VALE3",
//		"PETR3",
//		"BBDC4",
//		"AMBV4",
//		"VALE5",
//	"ITUB4"};


	// SMLL
//	private static String[] cods = {"MNDL3",
//		"POSI3",
//		"CCXC3",
//		"LUPA3",
//		"BICB4",
//		"BEEF3",
//		"LLIS3",
//		"ABCB4",
//		"LLXL3",
//		"TCSA3",
//		"OSXB3",
//		"MGLU3",
//		"BBRK3",
//		"TERI3",
//		"VAGR3",
//		"BPNM4",
//		"TGMA3",
//		"SLCE3",
//		"BISA3",
//		"EQTL3",
//		"BTOW3",
//		"GOLL4",
//		"JHSF3",
//		"COCE5",
//		"HBOR3",
//		"RSID3",
//		"LEVE3",
//		"BRIN3",
//		"QGEP3",
//		"GRND3",
//		"FLRY3",
//		"STBP11",
//		"CGAS5",
//		"PMAM3",
//		"ELPL4",
//		"MMXM3",
//		"MAGG3",
//		"EZTC3",
//		"RAPT4",
//		"HRTP3",
//		"AMAR3",
//		"EVEN3",
//		"ARZZ3",
//		"LPSB3",
//		"MYPK3",
//		"GFSA3",
//		"ALSC3",
//		"SULA11",
//		"IGTA3",
//		"ALPA4",
//		"SUZB5",
//		"VLID3",
//		"MRFG3",
//		"LIGT3",
//		"MILS3",
//		"ESTC3",
//		"OHLB3",
//		"CSMG3",
//		"ODPV3",
//		"BRSR6",
//		"ENBR3",
//		"QUAL3",
//		"PDGR3",
//		"MRVE3",
//		"POMO4",
//		"DASA3",
//		"AEDU3",
//		"TOTS3",
//	"KROT11"};

	
	// ibrx
	private static String[] cods = {
		"ABEV3.SA",
		"ALSC3.SA",
		"ALUP11.SA",
		"BBAS3.SA",
		"BBDC3.SA",
		"BBDC4.SA",
		"BBSE3.SA",
		"BEEF3.SA",
		"BPAC11.SA",
		"BRAP4.SA",
		"BRFS3.SA",
		"BRKM5.SA",
		"BRML3.SA",
		"BRPR3.SA",
		"BRSR6.SA",
		"BTOW3.SA",
		"BVMF3.SA",
		"CCRO3.SA",
		"CESP6.SA",
		"CIEL3.SA",
		"CMIG4.SA",
		"CPFE3.SA",
		"CPLE6.SA",
		"CSAN3.SA",
		"CSMG3.SA",
		"CSNA3.SA",
		"CVCB3.SA",
		"CYRE3.SA",
		"DTEX3.SA",
		"ECOR3.SA",
		"EGIE3.SA",
		"ELET3.SA",
		"ELET6.SA",
		"ELPL4.SA",
		"EMBR3.SA",
		"ENBR3.SA",
		"ENGI11.SA",
		"EQTL3.SA",
		"ESTC3.SA",
		"EZTC3.SA",
		"FIBR3.SA",
		"FLRY3.SA",
		"GFSA3.SA",
		"GGBR4.SA",
		"GOAU4.SA",
		"GOLL4.SA",
		"GRND3.SA",
		"HGTX3.SA",
		"HYPE3.SA",
		"IGTA3.SA",
		"ITSA4.SA",
		"ITUB4.SA",
		"JBSS3.SA",
		"KLBN11.SA",
		"KROT3.SA",
		"LAME3.SA",
		"LAME4.SA",
		"LIGT3.SA",
		"LINX3.SA",
		"LREN3.SA",
		"MDIA3.SA",
		"MGLU3.SA",
		"MPLU3.SA",
		"MRFG3.SA",
		"MRVE3.SA",
		"MULT3.SA",
		"MYPK3.SA",
		"NATU3.SA",
		"ODPV3.SA",
		"PCAR4.SA",
		"PETR3.SA",
		"PETR4.SA",
		"POMO4.SA",
		"PSSA3.SA",
		"QUAL3.SA",
		"RADL3.SA",
		"RAIL3.SA",
		"RAPT4.SA",
		"RENT3.SA",
		"SANB11.SA",
		"SAPR4.SA",
		"SBSP3.SA",
		"SEER3.SA",
		"SMLS3.SA",
		"SMTO3.SA",
		"SULA11.SA",
		"SUZB5.SA",
		"TAEE11.SA",
		"TIET11.SA",
		"TIMP3.SA",
		"TOTS3.SA",
		"TRPL4.SA",
		"UGPA3.SA",
		"USIM5.SA",
		"VALE3.SA",
		"VIVT4.SA",
		"VLID3.SA",
		"VVAR11.SA",
		"WEGE3.SA",
		"WIZS3.SA"
		};

	public static void main(String[] args) throws Exception{
		// http://www.infomoney.com.br/Pages/Download/Download.aspx?dtIni=null&dtFinish=null&Ativo=BRKM5&Semana=null&Per=12&type=1&Stock=BRKM5&StockType=1

		for (int i = 0; i < cods.length; i++){
			String infoURL = "http://www.infomoney.com.br/Pages/Download/Download.aspx?dtIni=null&dtFinish=null&Ativo=" + cods[i] + "&Semana=null&Per=6&type=1&Stock=" + cods[i] + "&StockType=1";
			URL url = new URL(infoURL);
			InputStream in = (InputStream)url.getContent();

			java.io.FileOutputStream fos = new java.io.FileOutputStream("/home/gbasilio/Desktop/historicos_infomoney/" + cods[i] + ".xls");

			byte[] buffer = new byte[2048];
			int bytesRead = in.read(buffer);
			while (bytesRead > 0){
				fos.write(buffer, 0, bytesRead);
				bytesRead = in.read(buffer);
			}

			System.out.println("Hist√≥rico para " + cods[i] + " baixado!");
			Thread.sleep(9000 + (new Random()).nextInt(12000));
		}
	}


}
